{
    "sourceFile": "src/components/AppNavbar.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 10,
            "patches": [
                {
                    "date": 1760209826733,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1760273476007,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,11 +3,13 @@\n \n export default function AppNavbar(){\n   const authed = !!localStorage.getItem('token')\n   const logout = () => { localStorage.removeItem('token'); window.location.href = '/' }\n+\n   return (\n-    <Navbar expand=\"lg\" bg=\"body\" className=\"border-bottom\">\n-      <Container>\n+    // fixed=\"top\" pins it; Container fluid makes it full width\n+    <Navbar bg=\"light\" expand=\"lg\" fixed=\"top\" className=\"shadow-sm\">\n+      <Container fluid>\n         <Navbar.Brand href=\"/\">Happennly!</Navbar.Brand>\n         <Navbar.Toggle aria-controls=\"nav\" />\n         <Navbar.Collapse id=\"nav\">\n           <Nav className=\"me-auto\">\n@@ -30,5 +32,5 @@\n         </Navbar.Collapse>\n       </Container>\n     </Navbar>\n   )\n-}\n\\ No newline at end of file\n+}\n"
                },
                {
                    "date": 1760648457367,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,36 +1,94 @@\n-import { Navbar, Nav, Container, Button } from 'react-bootstrap'\n-import ThemeSwitcher from './ThemeSwitcher'\n+// src/components/AppNavbar.jsx\n+import { useEffect, useState } from 'react';\n+import { Link, useNavigate, useLocation } from 'react-router-dom';\n+import { Navbar, Nav, Container, Dropdown, Button, Badge } from 'react-bootstrap';\n \n-export default function AppNavbar(){\n-  const authed = !!localStorage.getItem('token')\n-  const logout = () => { localStorage.removeItem('token'); window.location.href = '/' }\n+function readUser() {\n+  try { return JSON.parse(localStorage.getItem('user') || 'null'); }\n+  catch { return null; }\n+}\n \n+export default function AppNavbar() {\n+  const [user, setUser] = useState(readUser());\n+  const navigate = useNavigate();\n+  const location = useLocation();\n+\n+  // keep header in sync if auth changes in another tab or after login\n+  useEffect(() => {\n+    const sync = () => setUser(readUser());\n+    window.addEventListener('storage', sync);             // other tabs\n+    window.addEventListener('auth:changed', sync);        // same tab (manual dispatch)\n+    return () => {\n+      window.removeEventListener('storage', sync);\n+      window.removeEventListener('auth:changed', sync);\n+    };\n+  }, []);\n+\n+  const isAdmin = user?.role === 'admin';\n+\n+  const logout = () => {\n+    localStorage.removeItem('token');\n+    localStorage.removeItem('user');\n+    setUser(null);\n+    window.dispatchEvent(new Event('auth:changed'));      // notify listeners\n+    // stay on the same page if it’s public, otherwise go home\n+    if (location.pathname.startsWith('/dashboard')) navigate('/');\n+  };\n+\n+  const displayName = user?.name || user?.email?.split('@')[0] || 'User';\n+\n   return (\n-    // fixed=\"top\" pins it; Container fluid makes it full width\n-    <Navbar bg=\"light\" expand=\"lg\" fixed=\"top\" className=\"shadow-sm\">\n-      <Container fluid>\n-        <Navbar.Brand href=\"/\">Happennly!</Navbar.Brand>\n-        <Navbar.Toggle aria-controls=\"nav\" />\n-        <Navbar.Collapse id=\"nav\">\n+    <Navbar expand=\"md\" bg=\"light\" data-bs-theme=\"light\" sticky=\"top\" className=\"shadow-sm\">\n+      <Container>\n+        <Navbar.Brand as={Link} to=\"/\">Happennly!</Navbar.Brand>\n+\n+        <Navbar.Toggle aria-controls=\"main-nav\" />\n+        <Navbar.Collapse id=\"main-nav\">\n           <Nav className=\"me-auto\">\n-            <Nav.Link href=\"/\">Home</Nav.Link>\n-            <Nav.Link href=\"/events\">Events</Nav.Link>\n-            <Nav.Link href=\"/ai\">AI</Nav.Link>\n-            {authed && <Nav.Link href=\"/dashboard\">Dashboard</Nav.Link>}\n+            <Nav.Link as={Link} to=\"/\">Home</Nav.Link>\n+            <Nav.Link as={Link} to=\"/events\">Events</Nav.Link>\n+            <Nav.Link as={Link} to=\"/ai\">AI</Nav.Link>\n+            {isAdmin && (\n+              <Nav.Link as={Link} to=\"/dashboard\">\n+                Dashboard <Badge bg=\"secondary\" pill>Admin</Badge>\n+              </Nav.Link>\n+            )}\n           </Nav>\n-          <div className=\"d-flex gap-2 align-items-center\">\n-            <ThemeSwitcher />\n-            {authed ? (\n-              <Button variant=\"outline-danger\" size=\"sm\" onClick={logout}>Logout</Button>\n+\n+          <Nav className=\"ms-auto align-items-center\">\n+            {/* Theme switcher placeholder; keep yours if you have one */}\n+            {/* <ThemeSwitcher /> */}\n+\n+            {user ? (\n+              <Dropdown align=\"end\">\n+                <Dropdown.Toggle variant=\"outline-secondary\" size=\"sm\">\n+                  Hi, {displayName}\n+                </Dropdown.Toggle>\n+                <Dropdown.Menu>\n+                  <Dropdown.Header>\n+                    <div className=\"fw-semibold\">{displayName}</div>\n+                    <div className=\"small text-muted\">{user?.email}</div>\n+                    {isAdmin && <Badge bg=\"primary\" className=\"mt-2\">Admin</Badge>}\n+                  </Dropdown.Header>\n+                  <Dropdown.Divider />\n+                  {/* Add a /profile route later if you like */}\n+                  {/* <Dropdown.Item as={Link} to=\"/profile\">Profile</Dropdown.Item> */}\n+                  <Dropdown.Item onClick={logout} className=\"text-danger\">Logout</Dropdown.Item>\n+                </Dropdown.Menu>\n+              </Dropdown>\n             ) : (\n               <>\n-                <Nav.Link href=\"/login\">Login</Nav.Link>\n-                <Nav.Link href=\"/signup\">Signup</Nav.Link>\n+                <Button as={Link} to=\"/login\" variant=\"outline-secondary\" size=\"sm\" className=\"me-2\">\n+                  Login\n+                </Button>\n+                <Button as={Link} to=\"/signup\" variant=\"primary\" size=\"sm\">\n+                  Signup\n+                </Button>\n               </>\n             )}\n-          </div>\n+          </Nav>\n         </Navbar.Collapse>\n       </Container>\n     </Navbar>\n-  )\n+  );\n }\n"
                },
                {
                    "date": 1760648671024,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,9 +37,9 @@\n \n   const displayName = user?.name || user?.email?.split('@')[0] || 'User';\n \n   return (\n-    <Navbar expand=\"md\" bg=\"light\" data-bs-theme=\"light\" sticky=\"top\" className=\"shadow-sm\">\n+    <Navbar fixed=\"top\" expand=\"md\" bg=\"light\" data-bs-theme=\"light\" sticky=\"top\" className=\"shadow-sm\">\n       <Container>\n         <Navbar.Brand as={Link} to=\"/\">Happennly!</Navbar.Brand>\n \n         <Navbar.Toggle aria-controls=\"main-nav\" />\n"
                },
                {
                    "date": 1761235955745,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import { useEffect, useState } from 'react';\n import { Link, useNavigate, useLocation } from 'react-router-dom';\n import { Navbar, Nav, Container, Dropdown, Button, Badge } from 'react-bootstrap';\n \n+\n function readUser() {\n   try { return JSON.parse(localStorage.getItem('user') || 'null'); }\n   catch { return null; }\n }\n@@ -37,9 +38,9 @@\n \n   const displayName = user?.name || user?.email?.split('@')[0] || 'User';\n \n   return (\n-    <Navbar fixed=\"top\" expand=\"md\" bg=\"light\" data-bs-theme=\"light\" sticky=\"top\" className=\"shadow-sm\">\n+    <Navbar  expand=\"md\" bg=\"light\" data-bs-theme=\"light\" sticky=\"top\" className=\"shadow-sm\">\n       <Container>\n         <Navbar.Brand as={Link} to=\"/\">Happennly!</Navbar.Brand>\n \n         <Navbar.Toggle aria-controls=\"main-nav\" />\n"
                },
                {
                    "date": 1761236033111,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n // src/components/AppNavbar.jsx\n import { useEffect, useState } from 'react';\n import { Link, useNavigate, useLocation } from 'react-router-dom';\n import { Navbar, Nav, Container, Dropdown, Button, Badge } from 'react-bootstrap';\n+import ThemeSwitcher from './ThemeSwitcher';\n \n \n function readUser() {\n   try { return JSON.parse(localStorage.getItem('user') || 'null'); }\n@@ -78,8 +79,10 @@\n                 </Dropdown.Menu>\n               </Dropdown>\n             ) : (\n               <>\n+              <ThemeSwitcher />\n+\n                 <Button as={Link} to=\"/login\" variant=\"outline-secondary\" size=\"sm\" className=\"me-2\">\n                   Login\n                 </Button>\n                 <Button as={Link} to=\"/signup\" variant=\"primary\" size=\"sm\">\n"
                },
                {
                    "date": 1761236064699,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,9 +79,9 @@\n                 </Dropdown.Menu>\n               </Dropdown>\n             ) : (\n               <>\n-              <ThemeSwitcher />\n+              <Thewm />\n \n                 <Button as={Link} to=\"/login\" variant=\"outline-secondary\" size=\"sm\" className=\"me-2\">\n                   Login\n                 </Button>\n"
                },
                {
                    "date": 1761236071502,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,8 @@\n // src/components/AppNavbar.jsx\n import { useEffect, useState } from 'react';\n import { Link, useNavigate, useLocation } from 'react-router-dom';\n import { Navbar, Nav, Container, Dropdown, Button, Badge } from 'react-bootstrap';\n-import ThemeSwitcher from './ThemeSwitcher';\n \n \n function readUser() {\n   try { return JSON.parse(localStorage.getItem('user') || 'null'); }\n@@ -79,9 +78,9 @@\n                 </Dropdown.Menu>\n               </Dropdown>\n             ) : (\n               <>\n-              <Thewm />\n+              <ThemeSwitcher />\n \n                 <Button as={Link} to=\"/login\" variant=\"outline-secondary\" size=\"sm\" className=\"me-2\">\n                   Login\n                 </Button>\n"
                },
                {
                    "date": 1761236077558,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n // src/components/AppNavbar.jsx\n import { useEffect, useState } from 'react';\n import { Link, useNavigate, useLocation } from 'react-router-dom';\n import { Navbar, Nav, Container, Dropdown, Button, Badge } from 'react-bootstrap';\n+import ThemeSwitcher from './ThemeSwitcher';\n \n \n function readUser() {\n   try { return JSON.parse(localStorage.getItem('user') || 'null'); }\n"
                },
                {
                    "date": 1761238398129,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,8 @@\n import { Link, useNavigate, useLocation } from 'react-router-dom';\n import { Navbar, Nav, Container, Dropdown, Button, Badge } from 'react-bootstrap';\n import ThemeSwitcher from './ThemeSwitcher';\n \n-\n function readUser() {\n   try { return JSON.parse(localStorage.getItem('user') || 'null'); }\n   catch { return null; }\n }\n@@ -14,13 +13,12 @@\n   const [user, setUser] = useState(readUser());\n   const navigate = useNavigate();\n   const location = useLocation();\n \n-  // keep header in sync if auth changes in another tab or after login\n   useEffect(() => {\n     const sync = () => setUser(readUser());\n-    window.addEventListener('storage', sync);             // other tabs\n-    window.addEventListener('auth:changed', sync);        // same tab (manual dispatch)\n+    window.addEventListener('storage', sync);\n+    window.addEventListener('auth:changed', sync);\n     return () => {\n       window.removeEventListener('storage', sync);\n       window.removeEventListener('auth:changed', sync);\n     };\n@@ -31,17 +29,16 @@\n   const logout = () => {\n     localStorage.removeItem('token');\n     localStorage.removeItem('user');\n     setUser(null);\n-    window.dispatchEvent(new Event('auth:changed'));      // notify listeners\n-    // stay on the same page if it’s public, otherwise go home\n+    window.dispatchEvent(new Event('auth:changed'));\n     if (location.pathname.startsWith('/dashboard')) navigate('/');\n   };\n \n   const displayName = user?.name || user?.email?.split('@')[0] || 'User';\n \n   return (\n-    <Navbar  expand=\"md\" bg=\"light\" data-bs-theme=\"light\" sticky=\"top\" className=\"shadow-sm\">\n+    <Navbar expand=\"md\" bg=\"body\" sticky=\"top\" className=\"shadow-sm\">\n       <Container>\n         <Navbar.Brand as={Link} to=\"/\">Happennly!</Navbar.Brand>\n \n         <Navbar.Toggle aria-controls=\"main-nav\" />\n@@ -57,10 +54,10 @@\n             )}\n           </Nav>\n \n           <Nav className=\"ms-auto align-items-center\">\n-            {/* Theme switcher placeholder; keep yours if you have one */}\n-            {/* <ThemeSwitcher /> */}\n+            {/* Always show the theme switcher */}\n+            <ThemeSwitcher />\n \n             {user ? (\n               <Dropdown align=\"end\">\n                 <Dropdown.Toggle variant=\"outline-secondary\" size=\"sm\">\n@@ -72,17 +69,13 @@\n                     <div className=\"small text-muted\">{user?.email}</div>\n                     {isAdmin && <Badge bg=\"primary\" className=\"mt-2\">Admin</Badge>}\n                   </Dropdown.Header>\n                   <Dropdown.Divider />\n-                  {/* Add a /profile route later if you like */}\n-                  {/* <Dropdown.Item as={Link} to=\"/profile\">Profile</Dropdown.Item> */}\n                   <Dropdown.Item onClick={logout} className=\"text-danger\">Logout</Dropdown.Item>\n                 </Dropdown.Menu>\n               </Dropdown>\n             ) : (\n               <>\n-              <ThemeSwitcher />\n-\n                 <Button as={Link} to=\"/login\" variant=\"outline-secondary\" size=\"sm\" className=\"me-2\">\n                   Login\n                 </Button>\n                 <Button as={Link} to=\"/signup\" variant=\"primary\" size=\"sm\">\n"
                },
                {
                    "date": 1761281263993,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,9 +54,9 @@\n             )}\n           </Nav>\n \n           <Nav className=\"ms-auto align-items-center\">\n-            {/* Always show the theme switcher */}\n+           \n             <ThemeSwitcher />\n \n             {user ? (\n               <Dropdown align=\"end\">\n"
                }
            ],
            "date": 1760209826733,
            "name": "Commit-0",
            "content": "import { Navbar, Nav, Container, Button } from 'react-bootstrap'\nimport ThemeSwitcher from './ThemeSwitcher'\n\nexport default function AppNavbar(){\n  const authed = !!localStorage.getItem('token')\n  const logout = () => { localStorage.removeItem('token'); window.location.href = '/' }\n  return (\n    <Navbar expand=\"lg\" bg=\"body\" className=\"border-bottom\">\n      <Container>\n        <Navbar.Brand href=\"/\">Happennly!</Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"nav\" />\n        <Navbar.Collapse id=\"nav\">\n          <Nav className=\"me-auto\">\n            <Nav.Link href=\"/\">Home</Nav.Link>\n            <Nav.Link href=\"/events\">Events</Nav.Link>\n            <Nav.Link href=\"/ai\">AI</Nav.Link>\n            {authed && <Nav.Link href=\"/dashboard\">Dashboard</Nav.Link>}\n          </Nav>\n          <div className=\"d-flex gap-2 align-items-center\">\n            <ThemeSwitcher />\n            {authed ? (\n              <Button variant=\"outline-danger\" size=\"sm\" onClick={logout}>Logout</Button>\n            ) : (\n              <>\n                <Nav.Link href=\"/login\">Login</Nav.Link>\n                <Nav.Link href=\"/signup\">Signup</Nav.Link>\n              </>\n            )}\n          </div>\n        </Navbar.Collapse>\n      </Container>\n    </Navbar>\n  )\n}"
        }
    ]
}